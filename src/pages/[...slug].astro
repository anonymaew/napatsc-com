---
import MarkdownComponent from "@astrojs/markdown-component";

export async function getStaticPaths() {
  const pages = [undefined, "contact", "about"];
  return pages.map((slug) => {
    return {
      params: { slug },
    };
  });
}

const url = Astro.params.slug;
const isHome = url === undefined;
const githubUrl = `https://raw.githubusercontent.com/anonymaew/anonymaew/master/${
  isHome ? "README.md" : `${url}.md`
}`;
const response = await fetch(githubUrl);
const content = await response.text();
const md = `
${content.replaceAll(".md", "")}
`;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content="Napat Srichan's website portfolio" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>Napat Srichan</title>
  </head>
  <body class="bg-zinc-900">
    <div
      class="relative mx-auto p-4 pt-8 prose prose-invert prose-a:text-emerald-400 prose-headings:pb-4 prose-headings:border-b prose-headings:border-zinc-500 prose-img:m-1 prose-img:inline prose-thead:border-t prose-thead:border-zinc-500 prose-table:text-center prose-th:py-4"
    >
      {
        !isHome && (
          <a
            class="not-prose absolute mt-10 mr-8 top-0 right-0 text-lg text-zinc-300 underline"
            href="/"
          >
            {"< back"}
          </a>
        )
      }
      <MarkdownComponent>{md}</MarkdownComponent>
    </div>
  </body>
</html>
